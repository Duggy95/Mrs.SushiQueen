using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class TutorialCook : TutorialBase
{
    public GameObject[] customer;
    public GameObject orderView;
    public GameObject cookView;

    WaitForSeconds ws;

    bool isCustomer;
    public bool canMake;
    public int count = 0;
    Vector2 customerTr = Vector2.zero;

    public override void Enter()
    {
        ws = new WaitForSeconds(2f);
        //시작 세팅 = 주문화면 보이게
        orderView.SetActive(true);
        cookView.SetActive(false);
        StartCoroutine(Create(0));
    }

    public override void Execute(TutorialManager tutorialManager)
    {
        if(isCustomer)
        {
            tutorialManager.SetNextTutorial();
        }
    }

    public override void Exit()
    {

    }

    public void ViewOrder()  //주문화면 요리화면 전환 메서드
    {
        if (canMake)  //만들 수 있을 때
        {
            count++;
            if (count % 2 == 0)
            {
                cookView.SetActive(false);
                count = 0;
            }
            else
            {
                cookView.SetActive(true);
            }
        }
    }

    public IEnumerator Create(int num)
    {
        //2초 후 손님 생성.
        yield return ws;
        /*GameObject customer = Instantiate(customerPrefab, customerTr,
                                                                Quaternion.identity, orderView.transform);*/
        customer[num].transform.localPosition = new Vector2(-400, -100);  //손님 위치
        //customer.transform.SetSiblingIndex(1);  //2번째 자식.
        isCustomer = true;
    }
}
